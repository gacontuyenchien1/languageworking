USE MASTER
GO
CREATE DATABASE MCTProject
GO
USE MCTProject
GO

CREATE TABLE ACCOUNT(
	ACCOUNT_ID INT,
	USER_NAME VARCHAR(30),
	PASS_WORD VARCHAR(30),
	LAST_TIME_LOG_IN DATETIME,
	BLOCKED SMALLINT,
	EXPIRED SMALLINT,
	FIRST_NAME NVARCHAR(30),
	LAST_NAME NVARCHAR(30),
	GENDER SMALLINT,
	ROLE SMALLINT,
	PRIMARY KEY (ACCOUNT_ID)
)

CREATE TABLE CHAT_ROOM(
	ROOM_ID INT,
	ROOM_NAME NVARCHAR(60),
	CREATED_TIME DATETIME,
	CREATED_BY_ACCOUNT_ID INT,
	STATUS SMALLINT,
	PRIMARY KEY (ROOM_ID)
)

CREATE TABLE CHAT_MESSAGE(
	MESSAGE_ID INT,
	ACCOUNT_ID INT FOREIGN KEY REFERENCES ACCOUNT(ACCOUNT_ID),
	ROOM_ID INT FOREIGN KEY REFERENCES CHAT_ROOM(ROOM_ID),
	MESSAGE_CONTEXT NVARCHAR(256),
	SENT_TIME DATETIME,
	STATUS SMALLINT,
	PRIMARY KEY ( MESSAGE_ID, ACCOUNT_ID, ROOM_ID),
	
)

CREATE TABLE CHAT_PARTICIPANT(
	ROOM_ID INT FOREIGN KEY REFERENCES CHAT_ROOM(ROOM_ID),
	ACCOUNT_ID INT FOREIGN KEY REFERENCES ACCOUNT(ACCOUNT_ID),
	LAST_SEEN_MESSAGE_ID INT
)

CREATE TABLE CALL_GROUP(
	GROUP_ID INT,
	GROUP_NAME NVARCHAR(60),
	CREATED_TIME DATETIME,
	CREATED_BY_ACCOUNT_ID INT,
	STATUS SMALLINT,
	PRIMARY KEY (GROUP_ID)
)

CREATE TABLE table_45(
	CALL_PARTICIPANT_ID INT,
	GROUP_ID INT  FOREIGN KEY REFERENCES CALL_GROUP(GROUP_ID),
	ACCOUNT_ID INT FOREIGN KEY REFERENCES ACCOUNT(ACCOUNT_ID),
	START_TIME DATETIME,
	END_TIME DATETIME,
	CALL_TIME INT,
	PRIMARY KEY (CALL_PARTICIPANT_ID)
)
